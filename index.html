<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realm Tycoon</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/systems/combat.css">
    <link rel="stylesheet" href="css/systems/inventory.css">
    <link rel="stylesheet" href="css/systems/enchant.css">
    <link rel="stylesheet" href="css/systems/chat.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>

    <!-- Loading Screen -->
    <div id="loading-screen" style="position:fixed;top:0;left:0;width:100%;height:100%;background:var(--bg-primary);display:flex;justify-content:center;align-items:center;z-index:9999;">
        <div style="text-align:center;color:var(--accent-gold);">
            <div style="font-size:3rem;margin-bottom:20px;">üè∞</div>
            <div style="font-family:var(--font-display);font-size:1.5rem;">Realm Tycoon</div>
            <div style="margin-top:10px;color:var(--text-secondary);">Loading...</div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-container" class="hidden">

        <!-- Top Bar -->
        <header id="top-bar" role="banner">
            <h2 class="text-gold" style="margin-bottom:0;cursor:pointer;" onclick="UI.switchView('town')" aria-label="Realm Tycoon Ana Sayfa">Realm Tycoon</h2>

            <div class="resources-container" id="top-resources" role="list" aria-label="Kaynaklar">
                <div class="resource-item" title="Gold" role="listitem"><span class="icon">üü°</span> <span id="res-gold" class="text-gold">0</span></div>
                <div class="resource-item" title="Iron" role="listitem"><span class="icon">‚õèÔ∏è</span> <span id="res-iron">0</span></div>
                <div class="resource-item" title="Wood" role="listitem"><span class="icon">üå≤</span> <span id="res-wood">0</span></div>
                <div class="resource-item" title="Crystal" role="listitem"><span class="icon">üíé</span> <span id="res-crystal">0</span></div>
                <div class="resource-item" title="Gems" role="listitem"><span class="icon">‚ú®</span> <span id="res-gems" class="text-gold">0</span></div>
            </div>

            <div style="display:flex;gap:15px;align-items:center;margin-right:15px;">
                <div id="level-display" style="text-align:right;" aria-label="Seviye ve Tecr√ºbe">
                    <div style="font-family:var(--font-display);font-weight:bold;color:var(--accent-gold);font-size:0.9rem;">
                        <span id="player-level">1</span>. Seviye
                    </div>
                    <div style="font-size:0.75rem;color:var(--text-secondary);">
                        <span id="xp-current">0</span> / <span id="xp-required">100</span> XP
                    </div>
                    <div style="width:100px;height:4px;background:#333;border-radius:2px;margin-top:4px;overflow:hidden;">
                        <div id="xp-progress" style="width:0%;height:100%;background:var(--accent-gold);transition:width 0.3s;"></div>
                    </div>
                </div>
                <div id="player-name" style="font-family:var(--font-display);font-weight:bold;color:var(--text-primary);">Lord</div>
            </div>
        </header>

        <!-- Main View -->
        <main id="main-view">

            <!-- Town View -->
            <section id="town-view" class="view-section">
                <div class="town-map" id="town-map">
                    <!-- Buildings rendered by BuildingSystem -->
                </div>
            </section>

            <!-- Inventory View -->
            <section id="inventory-view" class="view-section hidden">
                <div class="inventory-container">
                    <div class="inventory-header">
                        <h2 class="inventory-title">üì¶ Envanter</h2>
                        <span class="inventory-count" id="inventory-count">0 / 100</span>
                    </div>
                    <div class="inventory-tabs" id="inventory-tabs">
                        <button class="inv-tab active" data-filter="all">T√ºm√º</button>
                        <button class="inv-tab" data-filter="weapon">‚öîÔ∏è Silahlar</button>
                        <button class="inv-tab" data-filter="armor">üõ°Ô∏è Zƒ±rhlar</button>
                        <button class="inv-tab" data-filter="ring">üíç Y√ºz√ºkler</button>
                        <button class="inv-tab" data-filter="amulet">üìø Kolyeler</button>
                    </div>
                    <div class="inventory-grid" id="inventory-grid">
                        <!-- Items rendered by InventorySystem -->
                    </div>
                </div>
            </section>

            <!-- Forge View -->
            <section id="forge-view" class="view-section hidden">
                <div class="category-container" id="forge-categories">
                    <!-- Categories rendered by BuildingSystem -->
                </div>
            </section>

            <!-- Enchant View -->
            <section id="enchant-view" class="view-section hidden">
                <div id="enchant-main-area">
                    <!-- Enchant UI rendered by EnchantSystem -->
                </div>
            </section>

            <!-- Trade View -->
            <section id="trade-view" class="view-section hidden">
                <div style="text-align:center;padding:40px;">
                    <h2 class="text-gold">Ticaret Limanƒ±</h2>
                    <p style="color:var(--text-secondary);margin:20px 0;">Pazar yeri yakƒ±nda a√ßƒ±lacak...</p>
                </div>
            </section>

            <!-- Profile View -->
            <section id="profile-view" class="view-section hidden">
                <div style="max-width:600px;margin:0 auto;padding:20px;">
                    <h2 class="text-gold" style="text-align:center;margin-bottom:20px;">Lord Profili</h2>
                    <div id="profile-stats">
                        <!-- Stats rendered by PlayerSystem -->
                    </div>
                </div>
            </section>

        </main>

        <!-- Bottom Navigation -->
        <nav id="bottom-nav" role="navigation">
            <div class="nav-item active" data-view="town" onclick="UI.switchView('town')">
                <span class="icon">üè∞</span>
                <span>≈ûehir</span>
            </div>
            <div class="nav-item" data-view="inventory" onclick="UI.switchView('inventory')">
                <span class="icon">üéí</span>
                <span>Envanter</span>
            </div>
            <div class="nav-item" data-view="forge" onclick="UI.switchView('forge')">
                <span class="icon">‚öíÔ∏è</span>
                <span>Demirci</span>
            </div>
            <div class="nav-item" data-view="enchant" onclick="UI.switchView('enchant')">
                <span class="icon">‚ú®</span>
                <span>B√ºy√º</span>
            </div>
            <div class="nav-item" data-view="trade" onclick="UI.switchView('trade')">
                <span class="icon">‚öñÔ∏è</span>
                <span>Ticaret</span>
            </div>
            <div class="nav-item" data-view="profile" onclick="UI.switchView('profile')">
                <span class="icon">üë§</span>
                <span>Profil</span>
            </div>
        </nav>

    </div>

    <!-- Modal Container -->
    <div id="modal-container">
        <div class="modal-content">
            <button class="modal-close" onclick="UI.hideModal()">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Chat FAB -->
    <div class="chat-fab" id="chat-fab" onclick="ChatSystem.togglePanel()">
        üí¨
        <span class="chat-fab-badge" id="chat-badge" style="display:none;">0</span>
    </div>

    <!-- Chat Side Panel -->
    <div class="chat-panel-overlay" id="chat-overlay" onclick="ChatSystem.togglePanel()"></div>
    <div class="chat-side-panel" id="chat-panel">
        <div class="chat-panel-header">
            <span class="chat-panel-title">üí¨ Sohbet</span>
            <button class="chat-panel-close" onclick="ChatSystem.togglePanel()">&times;</button>
        </div>
        <div class="chat-panel-messages" id="chat-messages">
            <div class="chat-empty-state">
                <div class="chat-empty-state-icon">üí¨</div>
                <div>Hen√ºz mesaj yok</div>
            </div>
        </div>
        <div class="chat-panel-input">
            <div class="chat-channel-select">
                <button class="chat-channel-btn active" data-channel="global">Global</button>
                <button class="chat-channel-btn" data-channel="trade">Ticaret</button>
            </div>
            <div class="chat-input-row">
                <input type="text" id="chat-input" placeholder="Mesaj yaz..." maxlength="200">
                <button class="chat-send-btn" onclick="ChatSystem.sendMessage()">G√∂nder</button>
            </div>
        </div>
    </div>

    <!-- Hidden overlays for effects -->
    <div id="power-flash"></div>
    <div id="hero-damage-flash"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Data Files -->
    <script src="js/data/items.js"></script>
    <script src="js/data/buildings.js"></script>
    <script src="js/data/quests.js"></script>

    <!-- Core Modules -->
    <script src="js/core/Logger.js"></script>
    <script src="js/core/GameStateManager.js"></script>
    <script src="js/core/SecuritySys.js"></script>
    <script src="js/core/StorageAPI.js"></script>

    <!-- UI Modules -->
    <script src="js/ui/Utils.js"></script>
    <script src="js/ui/LangSys.js"></script>
    <script src="js/ui/UI.js"></script>

    <!-- Game Systems -->
    <script src="js/systems/LevelSystem.js"></script>
    <script src="js/systems/PlayerSystem.js"></script>
    <script src="js/systems/HeroSystem.js"></script>
    <script src="js/systems/ItemSystem.js"></script>
    <script src="js/systems/InventorySystem.js"></script>
    <script src="js/systems/BuildingSystem.js"></script>
    <script src="js/systems/ChatSystem.js"></script>
    <script src="js/systems/GameLoop.js"></script>
    <script src="js/systems/DailySystem.js"></script>

    <!-- Main Entry Point -->
    <script src="js/main.js"></script>

</body>
</html>
